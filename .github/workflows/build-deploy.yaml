on:
  workflow_dispatch:
    inputs:
      ReleaseType:
        description: 'Release Type'
        required: true
        default: 'warning'
        type: choice
        options:
        - Major Release
        - Minor Release
        - Patch Release
  release:
    types: [ created ]
  push:
    branches:
      - dev

jobs:
  RELEASE:
    runs-on: ubuntu-latest
    steps:
      - run: |
          echo "RELEASE: $RELEASE"
          echo "Tags: $TAGS"
          echo "Environment: $ENVIRONMENT"
          BRANCH="${GITHUB_REF#refs/heads/}"
          echo Branch=$BRANCH
        env:
          RELEASE: ${{ inputs.ReleaseType }}
          TAGS: ${{ inputs.tags }}
          ENVIRONMENT: ${{ inputs.environment }}

  tagging:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@main
    - name: Bump version and push tag
      uses: Instrument/github-tag-action@v1.0
      env:
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        BRANCH: main
        BUMP: major